# ? Step-by-Step Action Plan for Jenkins CI/CD Project

## ? IMMEDIATE NEXT STEPS (Start Here!)

Based on your current project state and the course objectives, here's exactly what you need to do next:

---

## STEP 1: Fix Jenkins GitHub Webhook Integration (30-45 minutes)

### Problem
You're getting a 403 CSRF error when trying to set up webhooks.

### Solution A: Disable CSRF for Webhooks (Quick Fix)

**1.1. Configure Jenkins Security**

```bash
# Access Jenkins container (if using Docker)
docker exec -it jenkins-cicd bash

# Edit Jenkins config
nano /var/jenkins_home/jenkins.model.JenkinsLocationConfiguration.xml
```

**1.2. Add Webhook Exception**

Go to Jenkins UI:
1. Navigate to `Manage Jenkins` ? `Security` ? `Configure Global Security`
2. Under "CSRF Protection", check "Enable proxy compatibility"
3. Save

**1.3. Alternative: Use GitHub Plugin**

Install and configure GitHub Plugin:
```
Manage Jenkins ? Plugins ? Available Plugins
Search for "GitHub Integration Plugin"
Install and restart Jenkins
```

Configure:
```
Manage Jenkins ? System ? GitHub
Add GitHub Server
Generate Personal Access Token on GitHub
Test connection
```

### Solution B: Use ngrok for Local Jenkins (Recommended for Testing)

**1.4. Install ngrok**

```bash
# macOS
brew install ngrok

# Or download from https://ngrok.com
```

**1.5. Expose Jenkins**

```bash
# Start ngrok tunnel
ngrok http 8080

# Copy the HTTPS URL (e.g., https://abc123.ngrok.io)
```

**1.6. Configure GitHub Webhook**

1. Go to GitHub: `Your Repo` ? `Settings` ? `Webhooks` ? `Add webhook`
2. Payload URL: `https://abc123.ngrok.io/github-webhook/`
3. Content type: `application/json`
4. Secret: Leave empty for now
5. Select: "Just the push event"
6. Click "Add webhook"

**1.7. Test the Webhook**

```bash
# Make a small change and push
echo "# Test webhook" >> README.md
git add README.md
git commit -m "test: webhook trigger"
git push

# Check Jenkins - build should start automatically
```

**? Expected Result:** Build triggers automatically when you push to GitHub

---

## STEP 2: Implement Automated Testing (4-6 hours)

### 2.1. Create Test Configuration Files

**Backend Test Profile for User Service**

```bash
# Create test configuration
mkdir -p backend/user-service/src/test/resources
```

<function_calls>
<invoke name="create_file">
<parameter name="content"># Test Profile for User Service
spring.application.name=USER-SERVICE
server.port=8081

# Use in-memory MongoDB for tests
spring.data.mongodb.uri=mongodb://localhost:27017/test_buy01

# Disable Eureka for tests
eureka.client.enabled=false

# Disable Kafka for tests
spring.kafka.bootstrap-servers=localhost:9092
spring.kafka.consumer.auto-offset-reset=earliest

# Logging
logging.level.com.backend.user_service=DEBUG
logging.level.org.springframework.data.mongodb=DEBUG

